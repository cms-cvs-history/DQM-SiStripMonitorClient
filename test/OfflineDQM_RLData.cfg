process TIFDQMSOURCES = {

  service = MessageLogger {
      untracked vstring destinations = { "cout" }
      untracked PSet cout = { untracked string threshold = "INFO" }
      untracked vstring debugModules   = { "SiStripZeroSuppression", "SiStripClusterizer"}
  }

service = AdaptorConfig {} 
   source = PoolSource { 
      untracked vstring fileNames = {
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.0.root',
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.1.root',
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.2.root',
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.3.root',
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.4.root',
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.5.root'
       }
    }
  untracked PSet maxEvents = {untracked int32 input = -1}
  # magnetic field
#  include "Geometry/CMSCommonData/data/cmsMagneticFieldXML.cfi"
  include "MagneticField/Engine/data/uniformMagneticField.cfi"
  replace UniformMagneticFieldESProducer.ZFieldInTesla = 0.0
  es_prefer = UniformMagneticFieldESProducer{}

  # tracker geometry
  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
 
  # tracker numbering
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
 
  # cms geometry
  include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"

  #-------------------------------------------------
  ## CALIBRATION
  #-------------------------------------------------

    ## CABLING
    include "CalibTracker/Configuration/data/SiStrip_FrontierCabling.cfi"
    replace siStripFedCabling.toGet={ { string record = "SiStripFedCablingRcd" string tag = "SiStripCabling_pass4_test_v1"} }
    replace siStripFedCabling.connect = "oracle://cms_orcoff_int2r/CMS_COND_STRIP"
    ## to use Frontier
    ## replace siStripFedCabling.connect = "frontier://FrontierDev/CMS_COND_STRIP" 
    replace siStripFedCabling.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"

    ## PEDESTALS
    include "CalibTracker/Configuration/data/SiStrip_FrontierPedestals.cfi"
    replace siStripPedestals.toGet={   { string record = "SiStripPedestalsRcd"  string tag = "SiStripPedestals_pass4_test_v1_p"}  }
    replace siStripPedestals.connect = "oracle://cms_orcoff_int2r/CMS_COND_STRIP"
    ## to use Frontier
    ## replace siStripPedestals.connect = "frontier://FrontierDev/CMS_COND_STRIP"
    replace siStripPedestals.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"

    ## NOISE
    include "CalibTracker/Configuration/data/SiStrip_FrontierNoise.cfi"
    replace siStripNoise.toGet={ { string record = "SiStripNoisesRcd"     string tag = "SiStripNoises_pass4_test_v1_n"} }
    replace siStripNoise.connect = "oracle://cms_orcoff_int2r/CMS_COND_STRIP"
    ## to use Frontier
    ## replace siStripNoise.connect = "frontier://FrontierDev/CMS_COND_STRIP"  
    replace siStripNoise.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"

    ## GAIN
    # Gain in TBufferStream needs to be uploaded, for the time being use fake source       ## FAKE CONDITIONS
    include "CalibTracker/Configuration/data/SiStrip_FrontierGain.cfi"
    replace siStripApvGain.toGet={
         { string record = "SiStripApvGainRcd" string tag = "SiStripApvGain_TickMarksfromASCII_TBuffer_v1" } }
    replace siStripApvGain.connect = "oracle://cms_orcoff_int2r/CMS_COND_STRIP"
    ## to use Frontier
    ## replace siStripApvGain.connect = "frontier://FrontierDev/CMS_COND_STRIP"  
    replace siStripApvGain.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"
  


    ## FAKE Conditions
    # Gain in TBufferStream needs to be uploaded, for the time being use fake source      
    #include "CalibTracker/Configuration/data/SiStrip_FakePedestals.cfi"
    #include "CalibTracker/Configuration/data/SiStrip_FakeNoise.cfi"
    #include "CalibTracker/Configuration/data/SiStrip_FakeGain.cfi"
    #include "CalibTracker/Configuration/data/SiStrip_FakeLorentzAngle.cfi"
    #include "CalibTracker/Configuration/data/Tracker_FakeAlignment.cfi"
    include "CalibTracker/SiStripESProducers/data/SiStripQualityFakeESSource.cfi"


    #-----------------------
    ####  Reconstruction Modules
    #-----------------------

    include "EventFilter/SiStripRawToDigi/data/SiStripDigis.cfi"
    replace SiStripDigis.ProductLabel="source"

    include "RecoLocalTracker/SiStripZeroSuppression/data/SiStripZeroSuppression.cfi"

    include "RecoLocalTracker/SiStripClusterizer/data/SiStripClusterizer_RealData.cfi"

    include "AnalysisAlgos/SiStripClusterInfoProducer/data/SiStripClusterInfoProducer.cfi"

    include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"

    #--------------------------
    #### DQM
    #--------------------------
    # DQM services
    service = DaqMonitorROOTBackEnd{
      untracked int32 verbose = 0
    }

    # tracer service - very verbose - useful for debugging only
    #  service = Tracer { untracked string indention = "$$"}


    service = DQMShipMonitoring{
   	//event-period for shipping monitoring to collector (default: 25)
     untracked uint32 period = 1000
    }

    #### MonitorPedestal ####
    # SiStripMonitorPedestals
    include "DQM/SiStripMonitorPedestals/data/SiStripMonitorPedestals.cfi"
    replace PedsMon.OutputMEsInRootFile = false

    #### SiStripMonitorDigi ####
    include "DQM/SiStripMonitorDigi/data/SiStripMonitorDigi_RealData.cfi"
    # use the following flag to select all detectors (e.g. for mtcc data). by default is false
    replace SiStripMonitorDigi.SelectAllDetectors = true

    #### SiStripMonitorCluster ####
    include "DQM/SiStripMonitorCluster/data/SiStripMonitorCluster.cfi"
    # use the following flag to select all detectors (e.g. for mtcc data). by default is false
    replace SiStripMonitorCluster.FillSignalNoiseHistos = false
    replace SiStripMonitorCluster.OutputMEsInRootFile = false
    replace SiStripMonitorCluster.SelectAllDetectors = true

    #### SiStripOfflineDQM ####
    include "DQM/SiStripMonitorClient/data/SiStripOfflineDQM.cfi"

    #### Quality Tester ####
    module qTester = QualityTester {
      untracked string qtList = "sistrip_qualitytest_config.xml"
      untracked bool getQualityTestsFromFile = true	        
      untracked int32 QualityTestPrescaler = 200
    }

    #### BEGIN DQM Online Environment #####
    # use include file for dqmEnv dqmSaver
    include "DQMServices/Components/test/dqm_onlineEnv.cfi"
    # put your subsystem name here: 
    # DT, Ecal, Hcal, SiStrip, Pixel, RPC, CSC, L1T 
    # (this goes into the filename)
    replace dqmSaver.fileName = "SiStrip"
    replace dqmSaver.dirName       = "."
    # (this goes into the foldername)
    replace dqmEnv.subSystemFolder = "SiStrip"

    # optionally change fileSaving  conditions
    # replace dqmSaver.prescaleLS =   -1
    # replace dqmSaver.prescaleTime = -1 # in minutes
    # replace dqmSaver.prescaleEvt =  -1
    replace dqmSaver.saveAtRunEnd = true
    # replace dqmSaver.saveAtJobEnd = false
    # will add switch to select histograms to be saved soon

   service = LockService {
     untracked vstring labels = { "source" }
   }
  #----------------------------
  #### Scheduling
  #-----------------------------

  sequence digitization   = {SiStripDigis,siStripZeroSuppression}
  sequence clusterization = {siStripClusters}

      
  path p = {digitization, clusterization, SiStripMonitorDigi,SiStripMonitorCluster,qTester,modSiStripOfflineDQM, dqmEnv, dqmSaver }

}
